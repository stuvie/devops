#!/bin/sh

startDir=$HOME/work/devops
cd $startDir || exit 1

checkfile() {
	src=files/$1
	installed=$2/$1
	echo diff $src $installed
	diff $src $installed
}

checkfile .bashrc			$HOME
checkfile .bash_aliases		$HOME
checkfile .cshrc			$HOME
checkfile authorized_keys	$HOME/.ssh
checkfile ../bin/hwinfo			$HOME/bin
checkfile hosts				/etc

if test `uname` = Darwin; then
	cd darwin
	checkfile rc.local					/etc
	checkfile sshd_config				/etc/ssh
	checkfile local.startup.plist		/Library/LaunchDaemons
	exit 0
fi

checkfile authorized_keys		/home/pi/.ssh
checkfile dhcpcd.conf			/etc
checkfile rc.local				/etc
checkfile resolv.conf			/etc
checkfile services				/etc
checkfile prometheus.yml		/etc/prometheus
checkfile sshd_config			/etc/ssh
checkfile nginx/fywss-proxies		/etc
checkfile nginx/sites-enabled/https	/etc
checkfile nginx/sites-enabled/default	/etc
